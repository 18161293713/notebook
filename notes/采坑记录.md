# 采坑记录

* gitlab网页分支合并解决冲突
  > 当前分支合并到目标分支出现冲突时，在网页上解决冲突会把目标分支先合并到当前分支解决冲突后，在反向把当前分支合并到目标分支。会导致把目标分支上其它版本合并到当前分支版本，从而导致不同迭代版本代码可能出现在当前分支中。

---

* xxl-job自动注册服务
  > xxl-job客服端未配置xxl.job.executor.ip时，且在服务端设置自动注册，当客户端所在服务端有多个网卡时（docker、flannel等会生成虚礼网卡，也可能部分网卡ip未打通服务）可能会获取到不能访问的ip地址导致job执行失败

---

* elasticsearch服务启动
  > 在linux服务器上部署ES服务器，启动等要切换到ES安装时创建的用户，负责导致各种问题（不能启动，命令等失败等问题） 

---

* 获取文件
  > 通过new File()的方式获取jar包内文件，会获取不到jar包内的文件，建议直接获取文件流this.getClass()下方法直接获取文件流

* poi导出excel文件
  * 03版(xls)导出每个sheet也最多导出65536；07版(xlsx)导出每个sheet页最多导出1048576;
  * HSSFWorkbook导出大数据量时会导致OOM，可替换成SXSSF会有更好性能(多线程分表导出往往会有更高效率)
    * SXSSF是通过把数据写到临时文件来减少内存占用(因为是先将数据写入临时文件在响应请求，当大数据量时会导致超时问题)
    * 解决该问题[参考](https://blog.yu000hong.com/2018/07/24/spreadsheet-xlsx.html)
